<md-toolbar color="secondary">
  <span fxFlex="1 0 auto">Users</span>
  <button md-fab (click)="openCreateDialog()" *neoAllowed="'users'; privilege: 'create'"><md-icon>add</md-icon></button>
</md-toolbar>

<md-card>
  <md-card-content>
    <md-form-field>
      <input mdInput type="search" placeholder="Filter users" [formControl]="filter">
    </md-form-field>
    <md-table #table [dataSource]="dataSource" mdSort>
      <ng-container mdColumnDef="id">
        <md-header-cell *mdHeaderCellDef md-sort-header>Username</md-header-cell>
        <md-cell *mdCellDef="let row">{{ row._id }}</md-cell>
      </ng-container>

      <ng-container mdColumnDef="email">
        <md-header-cell *mdHeaderCellDef md-sort-header>E-Mail</md-header-cell>
        <md-cell *mdCellDef="let row">{{ row.email }}</md-cell>
      </ng-container>

      <ng-container mdColumnDef="roles">
        <md-header-cell *mdHeaderCellDef>Roles</md-header-cell>
        <md-cell *mdCellDef="let row">{{ row.roles.join(',') }}</md-cell>
      </ng-container>

      <ng-container mdColumnDef="actions">
        <md-header-cell *mdHeaderCellDef></md-header-cell>
        <md-cell *mdCellDef="let row">
          <button *neoAllowed="(row | entityResource:'users'); privilege: 'update'" md-icon-button (click)="openUpdateDialog(row)"><md-icon>mode_edit</md-icon></button>
          <button *neoAllowed="(row | entityResource:'users'); privilege: 'remove'" md-icon-button (click)="openRemoveDialog(row)"><md-icon>delete_forever</md-icon></button>
        </md-cell>
      </ng-container>

      <md-header-row *mdHeaderRowDef="displayColumns"></md-header-row>
      <md-row *mdRowDef="let row; columns: displayColumns"></md-row>
    </md-table>

    <md-paginator #paginator
                  [length]="dataSource.length"
                  [pageIndex]="0"
                  [pageSize]="25"
                  [pageSizeOptions]="[5, 10, 25, 100]">
    </md-paginator>
  </md-card-content>
</md-card>
